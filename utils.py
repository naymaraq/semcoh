import numpy as np

def normalize_rows(x):
    """ Row normalization function    """
    N = x.shape[0]
    x /= np.sqrt(np.sum(x ** 2, axis=1)).reshape((N, 1)) + 1e-30
    return x